#!/bin/bash

# This program is used to start and stop multiple nodes

# Variables
NUM_NODES=4
BASE_PORT=8080
TEST_DURATION=10 # seconds

echo Starting Nodes...

# start python script for each node
for ((i=0; i<$NUM_NODES; i++))
do
  python main.py $((BASE_PORT+i)) &
  sleep .1
done

echo Nodes Started

sleep $TEST_DURATION

echo Killing Nodes...
pkill -f main.py
echo Nodes Killed

# check: ps -fA | grep python